---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import { readSingleton } from "@directus/sdk";
import { Client } from "@/lib/directus";
import Live from "../components/ui/Live.astro";

let live;
try {
	live = await Client.request(readSingleton("videos", {}));
} catch (e) {
	console.error(e);
}

let showVideoSection = false;
if (live && live.videos.length > 0) {
	showVideoSection = true;
}
---

<Layout pageTitle="Original Order">
	<div>
		<h1>
			<a href="/original-order">
				<img src="/eye.png" alt="Photograph of Bettinaâ€™s eye" />
				<p>Original Order</p>
			</a>
		</h1>
		<h1>
			<a href="/order-original">
				<p>Order Original</p>
				<img src="/egg.png" alt="A marble egg sculpture by Bettina" />
			</a>
		</h1>
	</div>
	<Nav />
	<a id="bettina-top" href="/information">
		<img src="/bettina.png" alt="Bettina handwritten by the artist" />
	</a>
	<a id="bettina-bottom" href="/information">
		<img
			src="/bettina.png"
			alt="Bettina handwritten by the artist, flipped horizontally"
		/>
	</a>
	{
		showVideoSection && (
			<a id="live" href="/live">
				<Live />
			</a>
		)
	}
</Layout>

<style>
	div {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		height: 100dvh;

		h1 {
			font-weight: bold;
			text-transform: uppercase;
			text-align: center;

			a {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: calc(5 * var(--spacing--base));

				img {
					height: calc(8 * var(--spacing--base));
					width: auto;
				}
			}
		}
	}

	#bettina-top,
	#bettina-bottom,
	#live {
		height: calc(2 * var(--spacing--base));
		position: fixed;
		right: var(--spacing--base);
	}

	#bettina-top {
		top: var(--spacing--base);
	}

	#bettina-bottom {
		bottom: var(--spacing--base);
		transform: scaleY(-1);
	}

	#live {
		top: var(--spacing--base);
		left: var(--spacing--base);
		right: unset;
	}
</style>
